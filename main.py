import io
import matplotlib
import folium
import random

import streamlit as st
import streamlit.components.v1 as html
import numpy as np
import pandas as pd
import plotly.express as px
import plotly.graph_objs as go
import matplotlib.pyplot as plt

import i18n
import style
import assets
import data
import requests
import json

from PIL import Image
from streamlit_folium import st_folium
from streamlit_option_menu import option_menu
from streamlit_js_eval import get_browser_language

class ChatBot:
    def __init__(self):
        # 질문과 대답을 매핑한 딕셔너리를 초기화합니다.
        self.responses = {
            "---질문 선택---": [
                "질문을 선택하고 답변해주세요"
            ],
            
            # 관광지 질문과 대답
            "부산에서 가볼만한 관광지에 대해 추천해줘": {
                "해동용궁사": [
                    "해동용궁사를 추천합니다. 해동용궁사를 방문하면 역사와 자연의 아름다움이 어우러진 특별한 경험을 만날 수 있습니다.",
                    "해동용궁사를 추천합니다. 해동용궁사는 한국의 불교 역사와 문화를 체험하고 명상과 평화로움을 즐길 수 있는 최고의 장소 중 하나입니다.",
                    "해동용궁사를 추천합니다. 해동용궁사는 아름다운 건축물과 자연 경관으로 둘러싸여 있어, 사진 찍기에도 훌륭한 곳입니다.",
                    "해동용궁사를 추천합니다. 역사와 미를 동시에 즐기고 싶다면 해동용궁사가 더할 나위 없이 좋은 선택입니다."
                ],
                "해운대": [
                    "해운대를 추천합니다. 일몰을 바라보며 해운대 해변을 산책하면 일상의 스트레스를 잊을 수 있는 최적의 힐링 장소입니다.",
                    "해운대를 추천합니다. 무엇보다, 해운대는 낮과 밤 모두 활기차고 아름다운 풍경을 선사하여 방문자들에게 특별한 경험을 선사합니다.",
                    "해운대를 추천합니다. 해운대는 국내 최고의 해수욕장 중 하나로, 화사한 모래사장과 푸른 바다가 매력적입니다."
                ],
                "남포동": [
                    "남포동을 추천합니다. 남포동은 부산의 역사적인 중심지로, 오랜 역사와 현대적인 매력이 어우러진 곳입니다.",
                    "남포동을 추천합니다. 현지 음식을 즐기기 위해 남포동 근처의 식당과 먹거리 거리를 탐험할 수 있습니다.",
                    "남포동을 추천합니다. 이곳에서는 다양한 상점과 시장에서 쇼핑을 즐기며 지역 특산품을 구입할 수 있습니다."
                ],
                "태종대": [
                    "태종대를 추천합니다. 태종대는 부산의 아름다운 해안에 자리하고 있으며, 푸른 바다와 함께 자연 경관을 감상하기에 최적의 장소입니다.",
                    "태종대를 추천합니다. 역사와 자연의 조화로운 분위기와 아름다운 경관은 방문자들에게 특별한 경험을 선사합니다."
                ],
                "송도해상케이블카": [
                    "송도해상케이블카를 추천합니다. 특히 일몰 시간에 케이블카를 타면 더욱 멋진 풍경을 만날 수 있으며, 사진을 찍기에도 좋은 장소 중 하나입니다.",
                    "송도해상케이블카를 추천합니다. 송도해상케이블카를 타면 자연과 도시의 조화로운 아름다움과 바다의 경치를 경험하며 특별한 추억을 만들 수 있습니다."
                ],
                "감천문화마을": [
                    "감천문화마을을 추천합니다. 감천문화마을은 부산에 위치한 예술과 문화가 공존하는 공간으로, 독특한 건축물과 예술 작품들이 즐비한 곳입니다.",
                    "감천문화마을을 추천합니다. 이 마을은 전통과 현대가 만나는 곳으로, 고요한 골목길과 예술 작품이 함께 어울려 아름다운 풍경을 제공합니다."
                ]
            },

            # 맛집 질문과 대답
            "부산에서 가볼만한 맛집에 대해 추천해줘": {
                "해목 해운대점": [
                    "해목 해운대점을 추천합니다. 해목 해운대는 유명한 고급식당이고 장어덮밥과 장어와 관련된 식사, 참기름 계열요리로 유명합니다.",
                    "해목 해운대점을 추천합니다. 여기에서는 신선한 재료로 만든 맛있는 일식을 즐길 수 있으며, 특히 장어 요리가 유명합니다."
                ],
                "피엘루": [
                    "피엘루를 추천합니다. 피엘루는 이탈리안 레스토랑으로, 정통 이탈리안 피자와 파스타를 맛볼 수 있습니다.",
                    "피엘루를 추천합니다. 이곳에서는 신선한 재료로 만든 피자와 파스타, 디저트를 즐길 수 있으며, 분위기도 아주 좋습니다."
                ],
                "부산횟집": [
                    "부산횟집을 추천합니다. 부산횟집은 신선한 해산물과 다양한 해물 레스토랑으로 유명하며, 싱싱한 해산물을 맛볼 수 있습니다.",
                    "부산횟집을 추천합니다. 이곳에서는 신선한 해산물과 횟집 메뉴를 즐길 수 있으며, 부산의 바다 맛을 경험할 수 있습니다."
                ]
            }
        }

    def get_response(self, question):
        # 사용자의 질문에 대한 답변을 반환합니다.
        if question in self.responses:
            return random.choice(self.responses[question])
        else:
            return "죄송합니다. 해당 질문에 대한 답변을 찾을 수 없습니다."

def main():
    # 페이지 제목 설정
    st.title("부산 여행 가이드")

    # 페이지 설명 추가
    st.write("부산 여행을 계획하거나 현지에서 필요한 정보를 얻을 수 있는 챗봇입니다. 아래에서 질문을 선택하고 답변을 받아보세요.")

    # ChatBot 클래스의 인스턴스를 생성합니다.
    chatbot = ChatBot()

    # 사용자로부터 질문을 입력 받습니다.
    question = st.selectbox("질문 선택", list(chatbot.responses.keys()))

    # 질문에 대한 답변을 가져옵니다.
    response = chatbot.get_response(question)

    # 답변을 화면에 표시합니다.
    st.write("답변:")
    st.write(response)

if __name__ == "__main__":
    main()
